
# TODO

- Move JVM test dependency declarations into library and application blocks
- Don't add a dist task when there is no source for the current target (eg native-launcher on linux)
- Native-launcher: fix Windows
- Move dependency declarations into library and application blocks
    - UI applications 
    - commonTest for applications 
- Libraries in this repo should target Java 11?
- Enable CC
- Add `run` task for apps
- Add `install` task for apps
- Support KMP app that targets native + jvm + browser + node
- Don't include launcher script for all targets for embedded JVM and native exe JVM apps (eg don't include bat script for macOS dist)
- Use `--launcher` instead of `--add-modules` with `jlink`
- Convert automatic modules to real modules prior to using with `jlink`
- Download service: don't keep the install dir when install action fails
- Native app plugin creates distributions for all targets
- Native macOS bundle plugin
- Configurable bundle id, app display name, app version
- Handle missing main class or multiple main classes
- Module-info
    - Default module name to top-most package
    - Only export packages that contain public non-internal types
    - Figure out how to enforce for Kotlin JVM compilation
    - Use an artifact transform to extract the module info for dependencies
- Add some kind `assembleDebug` task to build a single dev target.
- Add functional tests for plugins.
    - Customisation
- Refactor `DownloadRepository` to use Gradle exec service when used in a plugin.
- Gradle issues:
    - `MapProperty.getting()` does not seem to retain task dependencies
    - `@Nested Property<T>` does not seem to retain task dependencies
    - Make it easier to use ArtifactCollection from task
    - Fix import of `test-apps` - does not seem to be included
    - Use version catalog
    - "Included build 'x' does not exist" does not give any content, e.g. where is it defined?
    - Get the jlink tool for a toolchain
    - Add some way to get a dependency on all tasks with a given name in a build
    - Add some way to get a dependency on task with given path in a build, where the task may not exist
    - Fix `task.flatMap { it.someOutputDir.file("some-file") }` -> does not carry task dependencies
    - Awkward to discard property value from Kotlin (set(null) is ambiguous)
    - Set property using `Path`.
    - Some kind of managed type `Property<T>` or `Provider<T>` that allows deferred configuration (eg `Property<Distribution>`)
    - Create a property of managed type (eg `val dist: Distribution`)
    - Some way to get `FileCollection` elements as locations or file names (ie without the build dependencies, to generate a manifest, etc.)
    - No way to have a generated output directory (eg a task that uses `DownloadRepository` to locate the output)
    - Improve error message when settings plugin is applied to project, and vice versa
    - Some way to apply concurrent limits across all builds (eg to work around `commonizeNativeDistribution` concurrency issue)
    - Some way to map the base name of a Provider<RegularFile>
    - Some way to convert a `File`, `Path`, or string path to `RegularFile`
