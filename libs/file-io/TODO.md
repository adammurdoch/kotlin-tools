
## TODO

- Don't inherit open files:
  - Unix: open files with `O_CLOEXEC`
  - Windows: does this by default 
- Windows: open files with `FILE_SHARE_READ` when reading?
- Seek to location
  - `lseek()`, can also read file location using this method with relative offset of 0
  - `SetFilePointer()`, can also read location
- Lock file
  - `flock()`, `lockf()` or `fctl()`
  - `LockFileEx()` and `UnlockFile()`
- Query platform specific locations for applications
  - Directory for app to write data files to
  - Directory for app configuration
- Add specialized kinds of `Failure` and `Success` types for specific operations
  - read() reaches end of stream
  - Mismatched type for an operation, eg read text from a directory
  - Only use `UnsupportedOperation` in cases where it can actually be received
  - boolean result
  - unit result
- More efficient `readText()` and `writeText()` 
- Add some abstract permission functions, e.g. can read, set readable, etc
- Atomic Directory.createTemporaryDirectory() implementation on Windows
- Query Windows ACLs
- Query file systems on the machine
- Provide specialized subtypes of FileSystemElement for each platform
- Windows directory entry could carry metadata for the entry
- Atomic move
- Atomic recursive delete, if supported by FS
- Remove a symlink
- Follow symlinks
- Canonicalize a element
- Normalize paths
- Calculate relative paths
- Add context exceptions to all operations
- Test delete files, directories and symlinks
- Test set/get permissions on symlinks and directories
- Test visiting tree top down
- Test failure modes for reading/writing text
- Test failure modes for reading/writing bytes
- Test failure modes for reading/writing symlinks
- Test failure modes for listing directory contents (exists and is not a directory, etc)
- Test failure modes for get/set permissions
- Test failure modes for visiting tree
- Test read/write text or list entries via a broken symlink
- Test unicode directory names
- Test unicode symlink names and contents
- Test name resolution
- Test case-insensitive lookup
- Windows get user home dir: https://docs.microsoft.com/en-us/windows/win32/api/userenv/nf-userenv-getuserprofiledirectorya
